#!/bin/sh
#
# Allows connected usb devices to wake up from sleep
# Could be updated to take a flag if needed to toggle to 'disabled' instead
#
# Note this seems to prevent system suspend from working - disabled systemd unit
# for now. Not terribly surprising since this ends up marking every usb device
# as waking things up. Should figure out how to identify keyboards & mice and
# target those.
set -e

for f in /sys/bus/usb/devices/*/power/wakeup; do
  echo disabled > "$f"
done
