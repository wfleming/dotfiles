[general]
metadata = ~/.config/offlineimap
accounts = Personal, CodeClimate
pythonfile = ~/.config/offlineimap/utils.py

[Account Personal]
localRepository = PersonalLocal
remoteRepository = PersonalRemote

[Repository PersonalLocal]
type = Maildir
localfolders = ~/mail/personal
sep = /

[Repository PersonalRemote]
type = IMAP
remotehost = imap.fastmail.com
remoteuser = willfleming@fastmail.fm
remotepasseval = pass_entry("fastmail.com/imap")
ssl = yes
starttls = no
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
auth_mechanisms = PLAIN
folderfilter = lambda foldername: foldername not in [ 'Notes' ]

[Account CodeClimate]
localRepository = CodeClimateLocal
remoteRepository = CodeClimateRemote

[Repository CodeClimateLocal]
type = Maildir
localfolders = ~/mail/codeclimate

[Repository CodeClimateRemote]
type = IMAP
remotehost = imap.gmail.com
remoteuser = will@codeclimate.com
ssl = yes
starttls = no
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
auth_mechanisms = XOAUTH2
oauth2_request_url = https://accounts.google.com/o/oauth2/token
oauth2_client_id_eval = pass_entry("cc/gmail-api/oauth-client-id")
oauth2_client_secret_eval = pass_entry("cc/gmail-api/oauth-client-secret")
oauth2_refresh_token_eval = pass_entry("cc/gmail-api/refresh-token")
