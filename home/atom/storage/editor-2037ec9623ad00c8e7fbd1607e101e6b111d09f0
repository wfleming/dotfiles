{"mode":"editor","version":1,"windowDimensions":{"x":4,"y":22,"width":1436,"height":878},"syntax":{"deserializer":"Syntax","grammarOverridesByPath":{}},"project":{"path":"/Users/will/Projects/MintDigital/bathory","buffers":[{"text":"window.bathory = window.bathory || {}\nwindow.bathory.models = window.bathory.models || {}\n\nwindow.bathory.models.oils = (oilsView) ->\n  _oils         = {}\n  selectedOilIds  = [] # so we can maintain oil order in view\n  oilsView      = oilsView\n\n  init = () ->\n    _oils = oilsView.all()\n    # for edit view, initialize selected array based on view\n    selectedOilIds = (oil.id for oilId, oil of _oils when oil.selected)\n    decorateOils()\n    $(window).on('oil-state-changed', update)\n\n  oils = () ->\n    _oils\n\n  all = () ->\n    $.extend(true, {}, oils())\n\n  update = (e, params) ->\n    oilSelected = params[\"selected\"]\n\n    return if full() && oilSelected\n\n    updateSelected(_oils[params['id']], oilSelected)\n    triggerViewUpdate()\n\n  full = ->\n    selectedOilsLength = Object.keys(selected()).length\n    selectedOilsLength == 3\n\n  triggerViewUpdate = ->\n    $(window).trigger('model-state-changed')\n\n  updateSelected = (oil, isSelected) ->\n    if isSelected\n      if !(selectedOilIds.indexOf(oil.id) > 0)\n        selectedOilIds.push(oil.id)\n        oil.selected = true\n    else\n      position = selectedOilIds.indexOf(oil.id)\n      selectedOilIds.splice(position, 1)\n      oil.selected = false\n\n  selected = () ->\n    selectedOilObjects = []\n    for id in selectedOilIds\n      selectedOilObjects.push($.extend(true, {}, _oils[id]))\n    selectedOilObjects\n\n  selectedIds = () ->\n    selected().map (el) -> el.id\n\n  # This decorates the data from the dom with instance methods\n  decorateOils = () ->\n    for id of _oils\n      _oils[id].isCurrentFeeling = isCurrentFeeling\n\n  # Returns lowercase hyphenated name\n  useableName = (oil) ->\n    oil.name.replace(/\\s+/g, '-').toLowerCase()\n\n  # Instance methods\n\n  isCurrentFeeling = () ->\n    currentFeeling  = app.models.feelings.current()\n\n    shownFeeling =\n      if currentFeeling == 'everything'\n        true\n      else\n        if $.inArray(currentFeeling, this.feelings) == -1 then false else true\n\n  init()\n\n  return {\n    all: all\n    selected: selected\n    selectedIds: selectedIds\n    full: full\n    useableName: useableName\n  }\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[3,42]],"tailed":true,"reversed":true,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":422,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/will/Projects/MintDigital/bathory/app/assets/javascripts/models/oils.coffee","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"30b67d1abac98d26dfe373ee0269e9c7cf56993d","deserializer":"TextBuffer"},{"text":"window.bathory = window.bathory || {}\nwindow.bathory.models = window.bathory.models || {}\n\nwindow.bathory.models.salts = (saltsView) ->\n  _salts = {}\n  saltsView = saltsView\n\n  init = () ->\n    _salts = saltsView.all()\n    $(window).on('salt-state-changed', update)\n\n  salts = () ->\n    _salts\n\n  all = () ->\n    $.extend(true, {}, salts())\n\n  update = (e, params) ->\n    saltSelected = params[\"selected\"]\n\n    return if full() && saltSelected\n\n    _salts[params[\"id\"]].selected = saltSelected\n    triggerViewUpdate()\n\n  full = ->\n    selectedSaltsLength = Object.keys(selected()).length == 1\n\n  triggerViewUpdate = ->\n    $(window).trigger('model-state-changed')\n\n  selected = () ->\n    selectedSalts = []\n    for id of _salts\n      salt = _salts[id]\n      selectedSalts.push($.extend(true, {}, salt)) if salt.selected\n    selectedSalts\n\n  init()\n\n  return {\n    all: all\n    selected: selected\n    full: full\n  }\n","markers":{"markers":{"1":{"id":1,"range":[[0,0],[0,0]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":424},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[],"redoStack":[],"deserializer":"History"},"filePath":"/Users/will/Projects/MintDigital/bathory/app/assets/javascripts/models/salts.coffee","modifiedWhenLastPersisted":false,"digestWhenLastPersisted":"03e8a8a4ec223c648eb3c340faf08d5adbf4508a","deserializer":"TextBuffer"},{"text":"window.bathory = window.bathory || {}\nwindow.bathory.models = window.bathory.models || {}\n\n#\nwindow.bathory.models.mixtureComponent = (config) ->","markers":{"markers":{"1":{"id":1,"range":[[3,1],[3,1]],"tailed":false,"reversed":false,"valid":true,"invalidate":"never","persistent":true,"properties":{"type":"selection","editorId":427,"goalBufferRange":null},"deserializer":"Marker"}},"deserializer":"MarkerManager"},"history":{"undoStack":[{"patches":[{"id":1,"oldParams":{"properties":{"type":"selection","editorId":427}},"newParams":{"properties":{"type":"selection","editorId":427,"goalBufferRange":null}},"deserializer":"MarkerPatch"},{"oldRange":[[0,0],[0,0]],"newRange":[[0,0],[3,42]],"oldText":"","newText":"window.bathory = window.bathory || {}\nwindow.bathory.models = window.bathory.models || {}\n\nwindow.bathory.models.oils = (oilsView) ->","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"id":1,"oldParams":{"tailed":true,"range":[[3,22],[3,26]]},"newParams":{"tailed":false,"range":[[3,26],[3,26]]},"deserializer":"MarkerPatch"},{"oldRange":[[3,22],[3,26]],"newRange":[[3,22],[3,23]],"oldText":"oils","newText":"m","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,23],[3,23]],"newRange":[[3,23],[3,24]],"oldText":"","newText":"i","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,24],[3,24]],"newRange":[[3,24],[3,25]],"oldText":"","newText":"x","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,25],[3,25]],"newRange":[[3,25],[3,26]],"oldText":"","newText":"t","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,26],[3,26]],"newRange":[[3,26],[3,27]],"oldText":"","newText":"u","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,27],[3,27]],"newRange":[[3,27],[3,28]],"oldText":"","newText":"r","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,28],[3,28]],"newRange":[[3,28],[3,29]],"oldText":"","newText":"e","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,29],[3,29]],"newRange":[[3,29],[3,30]],"oldText":"","newText":"C","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,30],[3,30]],"newRange":[[3,30],[3,31]],"oldText":"","newText":"o","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,31],[3,31]],"newRange":[[3,31],[3,32]],"oldText":"","newText":"m","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,32],[3,32]],"newRange":[[3,32],[3,33]],"oldText":"","newText":"p","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,33],[3,33]],"newRange":[[3,33],[3,34]],"oldText":"","newText":"o","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,34],[3,34]],"newRange":[[3,34],[3,35]],"oldText":"","newText":"n","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,35],[3,35]],"newRange":[[3,35],[3,36]],"oldText":"","newText":"e","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,36],[3,36]],"newRange":[[3,36],[3,37]],"oldText":"","newText":"n","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,37],[3,37]],"newRange":[[3,37],[3,38]],"oldText":"","newText":"t","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,42],[3,50]],"newRange":[[3,42],[3,42]],"oldText":"oilsView","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"id":1,"oldParams":{"tailed":true},"newParams":{"tailed":false},"deserializer":"MarkerPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,42],[3,42]],"newRange":[[3,42],[3,43]],"oldText":"","newText":"c","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,43],[3,43]],"newRange":[[3,43],[3,44]],"oldText":"","newText":"o","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,44],[3,44]],"newRange":[[3,44],[3,45]],"oldText":"","newText":"n","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,45],[3,45]],"newRange":[[3,45],[3,46]],"oldText":"","newText":"f","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,46],[3,46]],"newRange":[[3,46],[3,47]],"oldText":"","newText":"i","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,47],[3,47]],"newRange":[[3,47],[3,48]],"oldText":"","newText":"g","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[2,0],[2,0]],"newRange":[[2,0],[3,0]],"oldText":"","newText":"\n","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"},{"oldRange":[[3,0],[3,0]],"newRange":[[3,0],[3,0]],"oldText":"","newText":"","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"},{"patches":[{"oldRange":[[3,0],[3,0]],"newRange":[[3,0],[3,1]],"oldText":"","newText":"#","normalizeLineEndings":true,"markerPatches":{},"deserializer":"BufferPatch"}],"deserializer":"Transaction"}],"redoStack":[],"deserializer":"History"},"filePath":"/Users/will/Projects/MintDigital/bathory/app/assets/javascripts/models/mixtureComponent.coffee","modifiedWhenLastPersisted":true,"digestWhenLastPersisted":"da39a3ee5e6b4b0d3255bfef95601890afd80709","deserializer":"TextBuffer"}],"deserializer":"Project"},"workspace":{"paneContainer":{"root":{"items":[{"id":427,"softTabs":true,"scrollTop":0,"scrollLeft":0,"displayBuffer":{"id":428,"softWrap":false,"editorWidthInChars":110,"tokenizedBuffer":{"bufferPath":"/Users/will/Projects/MintDigital/bathory/app/assets/javascripts/models/mixtureComponent.coffee","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":422,"softTabs":true,"scrollTop":0,"scrollLeft":0,"displayBuffer":{"id":423,"softWrap":false,"editorWidthInChars":110,"tokenizedBuffer":{"bufferPath":"/Users/will/Projects/MintDigital/bathory/app/assets/javascripts/models/oils.coffee","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"},{"id":424,"softTabs":true,"scrollTop":271,"scrollLeft":0,"displayBuffer":{"id":425,"softWrap":false,"editorWidthInChars":110,"tokenizedBuffer":{"bufferPath":"/Users/will/Projects/MintDigital/bathory/app/assets/javascripts/models/salts.coffee","tabLength":2,"deserializer":"TokenizedBuffer"},"deserializer":"DisplayBuffer"},"deserializer":"Editor"}],"activeItemUri":"/Users/will/Projects/MintDigital/bathory/app/assets/javascripts/models/oils.coffee","focused":false,"active":true,"deserializer":"Pane"},"deserializer":"PaneContainer"},"fullScreen":false,"deserializer":"Workspace"},"packageStates":{"find-and-replace":{"viewState":{"findHistory":["empty_","contents","new_add","can_fini","may_finalize","may_fin","promo_code","secret","in-view"],"replaceHistory":[],"modelState":{"useRegex":false,"inCurrentSelection":false,"caseSensitive":false}},"projectViewState":{"findHistory":["current_breadcrumb","is-active","is-hidden","in-view","is-hidden"],"replaceHistory":[],"pathsHistory":["*.html.erb","*.scss","*.coffee","*.scss","*.*"],"modelState":{"useRegex":false,"caseSensitive":false}},"resultsModelState":{"useRegex":false,"caseSensitive":false}},"fuzzy-finder":{"/Users/will/Projects/MintDigital/bathory/app/assets/javascripts/models/oils.coffee":1397312716166,"/Users/will/Projects/MintDigital/bathory/app/assets/javascripts/models/salts.coffee":1397312711583,"/Users/will/Projects/MintDigital/bathory/app/assets/javascripts/models/mixtureComponent.coffee":1397312685600},"keybinding-resolver":{"attached":false},"metrics":{"sessionLength":1216457175},"tree-view":{"directoryExpansionStates":{"app":{"assets":{"javascripts":{"models":{},"views":{}}},"views":{"order":{}}},"db":{},"log":{}},"selectedPath":"/Users/will/Projects/MintDigital/bathory/app/assets/javascripts/models/oils.coffee","hasFocus":false,"attached":true,"scrollLeft":73,"scrollTop":72,"width":200}}}