#!/bin/sh
# Relaunch DWM when it exits if the binary has changed. Otherwise, bail properly.
# This makes it easy to try config changes in an X Session

csum=$(sha1sum $(which dwm) | cut -d " " -f 1)
new_csum=""
while true; do
  if [ "$csum" != "$new_csum" ]; then
    dwm
  else
    exit 0
  fi

  if [ "$new_csum" != ""]; then
    csum="$new_csum"
  fi
  new_csum=$(sha1sum $(which dwm) | cut -d " " -f 1)
  sleep 0.5
done
